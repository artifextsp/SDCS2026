/* ====== LAYOUT GENERAL ====== */
:root{
  --azul-1:#0d6efd; --azul-2:#0a58ca; --gris:#6c757d; --borde:#e7edf5;
  --bg:#f6f9ff; --txt:#0f172a; --txt-2:#334155;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,sans-serif;
  color:var(--txt); background:var(--bg);
}

/* Ancho total (pantalla completa) */
.card.card-stu{
  width:100%; max-width:none; margin:0; border-radius:0;
  padding:28px clamp(16px,4vw,48px);
  background:#fff; box-shadow: 0 12px 24px rgba(15,23,42,.06);
}

/* ====== CABECERA ====== */
.head .h{ margin:0 0 4px; font-size: 34px; line-height:1.2 }
.h-azul{ color:#0b5ed7 }
.p{ margin:0; color:var(--txt-2) }

/* ====== FILTROS SUPERIORES ====== */
.row-top{
  display:flex; gap:16px; align-items:center; justify-content:space-between;
  margin:20px 0 6px;
}

/* Grado actual (badge a la izquierda) */
#gradoInfo{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border:1px solid var(--borde); border-radius:12px;
  background:#eef5ff; color:#0b3c8a; font-weight:700;
  box-shadow:0 1px 0 rgba(15,23,42,.02) inset;
}

/* Selector de grado solo en modo debug o sin sesión */
#gradoWrap{ display:flex; gap:8px; align-items:center; color:var(--txt-2); }
#gradoWrap.hide{ display:none; }
#gradoSel{
  padding:8px 10px; border:1px solid var(--borde); border-radius:10px; background:#fff;
}

/* Trimestres (arriba a la derecha) */
.trimestres{ display:flex; gap:10px; margin-left:auto; }
.chip{
  border:1px solid var(--borde); color:var(--txt-2);
  background:#fff; padding:8px 14px; border-radius:999px;
  cursor:pointer; transition:.15s; font-weight:700;
}
.chip:hover{ border-color:#d5e3f6 }
.chip-act{ background:var(--azul-1); color:#fff; border-color:transparent; }
.chip-act:hover{ background:var(--azul-2) }

/* ====== BLOQUES ====== */
.panel{ margin:18px 0; }
.h-azul-2{ color:#1e40af; margin:0 0 10px; }
.h-azul-3{ color:#1e3a8a; margin:14px 0 8px; }

/* ====== CHIPS DE CONTENIDO (QA, PROYECTO, CLASES) ====== */
/* Horizontal, en fila, con salto si no cabe */
.chips-row{
  display:flex; flex-wrap:wrap; gap:12px;
  border:1px dashed var(--borde); padding:14px; border-radius:14px; background:#f8fbff;
}
.chip-item{
  border:1px solid var(--borde); background:#eef5ff; color:#0b3c8a;
  border-radius:12px; padding:12px 16px; cursor:pointer; font-weight:800;
  display:inline-flex; align-items:center; justify-content:center;
  transition: transform .1s ease, background .15s;
  min-width: 210px; /* ancho legible de botón horizontal */
}
.chip-item:hover{ transform:translateY(-2px); background:#e6f0ff }

/* ====== VISTA Y RECURSOS ====== */
.view{
  min-height:120px; border:1px solid var(--borde); border-radius:14px;
  padding:16px; background:#fff;
}
.view h3{ margin:0 0 6px }
.view .lead{ color:var(--txt-2); margin:0 0 8px }
.view .meta{ font-size:.9rem; color:var(--gris); margin:8px 0 }

.recursos{
  display:grid; grid-template-columns: repeat(auto-fill, minmax(230px,1fr));
  gap:12px; margin-top:8px;
}
.rec{
  border:1px solid var(--borde); border-radius:12px; padding:12px; background:#fff;
  cursor:pointer; transition:.15s; font-weight:700; color:#0b3c8a;
}
.rec:hover{ background:#f3f8ff }

/* ====== MODAL ====== */
.modal{ position:fixed; inset:0; background:rgba(15,23,42,.5); display:none; }
.modal--open{ display:block }
.modal__inner{
  position:absolute; inset:40px; background:#fff; border-radius:14px;
  display:flex; flex-direction:column; overflow:hidden;
  box-shadow:0 20px 40px rgba(15,23,42,.25);
}
.modal__bar{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 16px; border-bottom:1px solid var(--borde);
}
.modal__title{ font-weight:800 }
.btn-close{
  border:1px solid var(--borde); background:#fff; padding:6px 10px; border-radius:8px; cursor:pointer;
}
.modal__body{ flex:1; overflow:auto; background:#0b1220 }
.modal__body iframe, .modal__body img{ width:100%; height:100%; display:block; }
.modal__body iframe{ border:0 }

/* ====== MENSAJES ====== */
.msg{
  border-radius:10px; padding:10px 12px; margin:10px 0; font-weight:700;
}
.msg.err{ color:#b42318; background:#fee4e2; border:1px solid #fecdca }
.msg.ok{ color:#05603a; background:#d1fadf; border:1px solid #a6f4c5 }
.msg.warn{ color:#93370d; background:#ffead5; border:1px solid #fed7aa }


/* ====== Modal ====== */
.modal { 
  position: fixed; inset: 0; display: none;
  background: rgba(10,18,41,.65); z-index: 1000;
  padding: 4vh 3vw;
}
.modal.open { display: block; }
.modal__inner {
  background: #0f1a33; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,.5);
  max-width: 1100px; margin: 0 auto; overflow: hidden;
  color: #fff;
}
.modal__bar {
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px; padding: 10px 14px; background: #122047;
}
.modal__title { font-weight: 600; font-size: 15px; color: #fff; }
.btn-close {
  border: 0; background: #e2e8f0; color: #102251;
  border-radius: 10px; padding: 4px 10px; font-weight: 700; cursor: pointer;
}
.btn-close:hover { background: #fff; }
.modal__body { padding: 12px; background: #0d1730; }

/* ===== Embeds: no deformar imágenes y limitar alturas ===== */
.embed-img {
  display: block; max-width: 100%; height: auto; object-fit: contain;
  max-height: 80vh; margin: 0 auto; border-radius: 8px;
}
.embed-video, .embed-audio { width: 100%; max-height: 80vh; }
.embed-iframe {
  width: 100%; height: min(80vh, 900px); border: 0; border-radius: 8px; background: #000;
}

/* Fallback cuando un sitio bloquea <iframe> */
.embed-fallback {
  display: grid; place-items: center; gap: 12px; padding: 24px; background: #0b1530; border-radius: 12px;
}
.embed-fallback p { color: #cbd5e1; margin: 0; }
.embed-fallback .btn-open {
  display: inline-block; padding: 8px 14px; border-radius: 10px;
  background: #2563eb; color: #fff; text-decoration: none; font-weight: 600;
}
.embed-fallback .btn-open:hover { filter: brightness(1.05); }


/* ====== VISOR DE RECURSOS ====== */
.modal.open .modal__body {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Evitar distorsión de imágenes */
.embed-img {
  max-width: 100%;
  max-height: calc(100vh - 220px);
  height: auto;
  width: auto;
  display: block;
  margin: 0 auto;
  object-fit: contain;
}

/* Iframe y video ocupan el área disponible sin deformarse */
.embed-iframe,
.embed-video {
  width: 100%;
  height: min(78vh, 900px);
  border: 0;
  border-radius: 12px;
  background: #0b1324;
  display: block;
}

/* Audio compacto */
.embed-audio {
  width: 100%;
  display: block;
}

/* Fallback elegante */
.embed-fallback {
  text-align: center;
  padding: 32px 16px;
  border-radius: 12px;
  background: #0b1324;
  color: #e6edff;
}

.embed-fallback .btn-open {
  display: inline-block;
  margin-top: 12px;
  padding: 10px 14px;
  border-radius: 10px;
  background: #1e40ff; /* azul intenso */
  color: #fff;
  text-decoration: none;
  font-weight: 600;
}
.embed-fallback .btn-open:hover {
  filter: brightness(1.05);
}

/* ===== Viewer de recursos (modal embebido) ===== */
.modal__body {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
  /* Altura útil: top bar + paddings del modal restados */
  max-height: calc(100vh - 220px);
  overflow: hidden;
}

/* Imagen: que nunca se deforme ni se salga */
.embed-img {
  max-width: 100%;
  max-height: calc(100vh - 240px);
  width: auto;
  height: auto;
  object-fit: contain;
  border-radius: 10px;
  display: block;
}

/* Vídeo/audio archivo */
.embed-video,
.embed-audio {
  max-width: 100%;
  width: 100%;
  border: 0;
  border-radius: 10px;
}

/* Iframe (PDF / YouTube / Drive…) ocupa bien alto sin scrolls absurdos */
.embed-iframe {
  width: 100%;
  height: calc(100vh - 260px);
  border: 0;
  border-radius: 10px;
  background: #0c1324; /* ayuda a que la transición se vea limpia */
}

/* Fallback cuando el sitio bloquea el embed */
.embed-fallback {
  display: grid;
  place-items: center;
  gap: 14px;
  text-align: center;
  padding: 16px;
  min-height: 240px;
  background: linear-gradient(180deg, rgba(6,12,30,.72), rgba(6,12,30,.86));
  color: #dbeafe;
  border-radius: 10px;
}
.embed-fallback .btn-open {
  display: inline-block;
  background: #1d4ed8;
  color: #fff;
  text-decoration: none;
  padding: 10px 14px;
  border-radius: 10px;
  font-weight: 700;
}


/* ===== Modal y recursos (estilos del visor) ===== */
.modal {
  position: fixed;
  inset: 0;
  display: none;
  padding: 32px;
  background: rgba(0, 10, 30, 0.55);
  z-index: 9999;
}
.modal.open { display: block; }

.modal__inner {
  height: calc(100vh - 64px);
  max-width: 1200px;
  margin: 0 auto;
  background: #0b1a33;
  border-radius: 14px;
  box-shadow: 0 12px 40px rgba(0,0,0,.35);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.modal__bar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: #082046;
  color: #fff;
  position: sticky;
  top: 0;
  z-index: 1;
}

.modal__title {
  flex: 1;
  font-weight: 700;
  border-radius: 999px;
  padding: 8px 14px;
  background: #eaf1ff;
  color: #021a4c;
}

.btn-close {
  border: 0;
  background: #2f6bff;
  color: #fff;
  border-radius: 12px;
  padding: 8px 16px;
  font-weight: 700;
  cursor: pointer;
}

.modal__body {
  flex: 1;
  padding: 16px;
  overflow: auto;
  background: #061833;
}

/* Embeds sin distorsión */
.embed-iframe {
  width: 100%;
  height: min(78vh, 960px);
  border: 0;
  display: block;
}

.embed-img {
  display: block;
  max-width: 100%;
  max-height: min(78vh, 960px);
  width: auto;
  height: auto;
  margin: 0 auto;
  border-radius: 10px;
  object-fit: contain; /* evita estiramiento */
  background: #00000020; /* pequeño contraste si hay transparencia */
}

.embed-video {
  width: 100%;
  max-height: min(78vh, 960px);
  border-radius: 10px;
  display: block;
}

.embed-audio { width: 100%; }

/* Fallback X-Frame-Options */
.embed-fallback {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 14px;
  height: min(70vh, 720px);
  padding: 32px;
  color: #d9e6ff;
  background: linear-gradient(180deg, rgba(6,12,30,.72), rgba(6,12,30,.86));
  border-radius: 8px;
}
.embed-fallback .btn {
  background: #1d4ed8;
  color: #fff;
  text-decoration: none;
  padding: 10px 14px;
  border-radius: 10px;
  font-weight: 700;
}


/* ----- Viewer de recursos (sin distorsión) ----- */
.embed-img {
  display: block;
  max-width: 100%;
  max-height: calc(100vh - 240px);
  width: auto;
  height: auto;
  object-fit: contain;
  margin: 0 auto;
}

.embed-iframe,
.embed-video {
  width: 100%;
  height: calc(100vh - 240px);
  border: 0;
}

.embed-audio { width: 100%; }

.embed-fallback {
  display: flex; align-items: center; justify-content: center;
  flex-direction: column; gap: 14px; min-height: 40vh;
  background: linear-gradient(180deg, rgba(6,12,30,.72), rgba(6,12,30,.86));
  color: #dbeafe; text-align: center; border-radius: 8px; padding: 16px;
}
.embed-fallback .btn-open {
  background: #1d4ed8; color: #fff; text-decoration: none;
  padding: 10px 14px; border-radius: 10px; font-weight: 700;
}


.embed-img{
  display:block;
  max-width:100%;
  max-height:calc(100vh - 240px);
  width:auto;
  height:auto;
  object-fit:contain;
  margin:0 auto;
}
.embed-iframe,.embed-video{width:100%;height:calc(100vh - 240px);border:0}
.embed-audio{width:100%}
.embed-fallback{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:14px;min-height:40vh;background:linear-gradient(180deg,rgba(6,12,30,.72),rgba(6,12,30,.86));color:#dbeafe;text-align:center;border-radius:8px;padding:16px}
.embed-fallback .btn-open{background:#1d4ed8;color:#fff;text-decoration:none;padding:10px 14px;border-radius:10px;font-weight:700}
